<div class="row">
    <div class="col-3">
        <p class="font-blk mar-10 p-4"> Metrics </p>
    </div>
    
    <div class="form-group col-9 filter">
        <mat-form-field class="mr-3 mt-2" appearance="outline">
            <mat-label>From Date</mat-label>
            <input readonly #fromInput matInput [max]="maxDate" [matDatepicker]="picker1">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="mr-3 mt-2" appearance="outline">
            <mat-label>To Date</mat-label>
            <input readonly #toInput matInput [max]="maxDate" [matDatepicker]="picker2">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
          <button class="apply" mat-button color="primary" (click)="getDateFilter()">Apply</button>
          <button  mat-raised-button color="accent" (click)="clearDate()">Reset</button>
    </div>
</div>



<div class="row main-container m-0">
    <!-- <div class="col-lg-2 col-md-3 col-sm-4 col-xs-12 side-bar">
        <app-menu-bar></app-menu-bar>
    </div> -->
    <div class="col-lg-12 col-md-12 col-sm-8 col-xs-12 p-0" style="margin-left: auto;">
        <div id="page-content-wrapper">
            
        <mat-slide-toggle class="ml-3" (change)="setMessage($event)">{{message}}</mat-slide-toggle>
    

            <div class="container-fluid content-box mt-2 ">

                <div class="region-list">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-12 p-1">
                            <div class="header regionHeader">
                                <div class="row">
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <h2>Marketing Material </h2>
                                        <!-- <img src="./././assets/image/metrics svg icons/metrics_region_128.svg" alt="" srcset=""> -->
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-12 pt-1">
                                        <h3 *ngIf="regionSoruce && message == 'Count'">{{regionCount || '0'}} </h3>
                                        <h3 *ngIf="regionSoruce && message != 'Count'">{{regionPer || '0'}} %</h3>
                                        <h3 *ngIf="!regionSoruce">{{'0'}} </h3>
                                        <h4>Total</h4>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="row" *ngIf="!regionSoruce">
                                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9 text-center m-top">
                                    <p><strong class="grey-color">Oops! No Records Found.</strong></p>
                                </div>
                            </div>
                            <div class="table-height">
                                
                                <table mat-table [dataSource]="regionSoruce" class=" regionTable">
                                    <ng-container matColumnDef="No">
                                    </ng-container>
                                    <ng-container matColumnDef="Country">
                                        <td mat-cell *matCellDef="let element" (click)="getFacility(element.metricName)" [ngClass]="{'selectedItem': regionId == element.metricName, 'none': element.metricName == '' }"> {{element.metricName}} 
                                            <span *ngIf="message =='Count'">{{element.metricCount}}</span> 
                                            <span *ngIf="message !='Count'">{{element.metricPercentage}} %</span> </td>
                                    </ng-container>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-12 p-1" *ngIf="facilitysource && facilityCount && facilityCount !='0'">
                            <div class="header facilityHeader">
                                <div class="row">
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <h2>{{regionId}} </h2>
                                        <!-- <img src="./././assets/image/metrics svg icons/metrics_facility_128.svg" alt="" srcset=""> -->
                                    </div>

                                    <div class="col-lg-5 col-md-5 col-sm-12 pt-1">
                                        <h3 *ngIf="facilitysource && message == 'Count'">{{facilityCount || '0'}} </h3>
                                        <h3 *ngIf="facilitysource && message != 'Count'">{{facilityPer || '0'}} %</h3>
                                        <h3 *ngIf="!facilitysource">{{'0'}} </h3>
                                        <h4>Total</h4>
                                    </div>
                                    
                                </div>

                            </div>
                            <div class="table-height" *ngIf="facilitysource">
                                <table mat-table [dataSource]="facilitysource" class=" facilityTable">
                                    <!-- <ng-container matColumnDef="hospital">
                                        <td mat-cell *matCellDef="let element" (click)="getHospital(element.metricId)" [ngClass]="{'selectedItem': facilityId == element.metricId }"> {{element.metricName}} <span>{{element.metricCount}}</span></td>

                                    </ng-container> -->
                                    <ng-container matColumnDef="hospital">
                                        <td mat-cell *matCellDef="let element" (click)="getHospital(element.metricName)" [ngClass]="{'selectedItem': facilityId == element.metricName, 'none': element.metricName == '-' }"> {{element.metricName}} 
                                            <span *ngIf="message =='Count'">{{element.metricCount}}</span> 
                                            <span *ngIf="message !='Count'">{{element.metricPercentage}} %</span> </td>
                                    </ng-container>
                                    <tr mat-row *matRowDef="let row; columns: facilityColumns;"></tr>
                                </table>
                            </div>
                            

                        </div>
                        
                        <div class="col-lg-4 col-md-4 col-sm-12 p-1"  *ngIf="departmentSource.length >= 1">
                            <div class="header departmentHeader">
                                <div class="row">
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <h2>Fund Type</h2>
                                        <!-- <img src="./././assets/image/metrics svg icons/metrics_department_128.svg" alt="" srcset=""> -->
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-12 pt-1">

                                        <h3 *ngIf="departmentSource && message == 'Count'">{{departmentCount || '0'}} </h3>
                                        <h3 *ngIf="departmentSource && message != 'Count'">{{departmentPer || '0'}} %</h3>
                                        <h3 *ngIf="!departmentSource">{{'0'}} </h3>
                                        <h4>Total</h4>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="table-height ">
                                <table mat-table [dataSource]="departmentSource" class=" departmentTable">
                                    <ng-container matColumnDef="department">
                                        <td mat-cell *matCellDef="let element"  [ngClass]="{'selectedItem': physicianId == element.metricName, 'none': element.metricName == '-' }"> {{element.metricName}} 
                                            <span *ngIf="message =='Count'">{{element.metricCount}}</span> 
                                            <span *ngIf="message !='Count'">{{element.metricPercentage}} %</span> </td>
                                    </ng-container>
                                    <tr mat-row *matRowDef="let row; columns: departmentColumns;"></tr>
                                </table>
                            </div>
                            <div class="row" *ngIf="!departmentSource">
                                <div class="col-lg-10 col-md-10 col-sm-9 col-xs-9 text-center m-top">
                                    <p><strong class="grey-color">Oops! No Records Found.</strong></p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-3 col-md-3 col-sm-12 p-1" *ngIf="physicianSource">
                            <div class="header physicianHeader">
                                <div class="row">
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <h2>Fund</h2>
                                        <!-- <img src="./././assets/image/metrics svg icons/metrics_doctors_128.svg" alt="" srcset=""> -->

                                    </div>

                                    <div class="col-lg-5 col-md-5 col-sm-12 pt-1">

                                        <h3 *ngIf="physicianSource">{{physicianCount || '0'}} </h3>
                                        <h3 *ngIf="!physicianSource">{{'0'}} </h3>
                                        <h4>Total</h4>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="table-height">
                                <table mat-table [dataSource]="physicianSource" class=" physicianTable">
                                    <ng-container matColumnDef="physician" >
                                        <td mat-cell *matCellDef="let element" [ngClass]="{'none': element.metricName == '' }"> {{element.metricName}} 
                                            <span *ngIf="message =='Count'">{{element.metricCount}}</span> 
                                            <span *ngIf="message !='Count'">{{element.metricPercentage}} %</span> </td>
                                    </ng-container>
                                    <!-- <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr> -->
                                    <tr mat-row *matRowDef="let row; columns: physicianColumns;"></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>